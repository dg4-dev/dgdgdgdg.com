---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Header from '@/components/header.astro';
import Footer from '@/components/footer.astro';

export const prerender = false;

type Status = 'open' | 'limited' | 'closed';

const STATUS_ENDPOINT =
  import.meta.env.PUBLIC_STATUS_ENDPOINT ?? 'https://<your-status-worker-subdomain>.workers.dev/status';

interface StatusResponse {
  status?: string;
}

let status: Status | 'unknown' = 'open';

try {
  const res = await fetch(STATUS_ENDPOINT, {
    headers: {
      Accept: 'application/json',
    },
  });

  if (res.ok) {
    const data = (await res.json()) as StatusResponse;
    if (data && (data.status === 'open' || data.status === 'limited' || data.status === 'closed')) {
      status = data.status;
    } else {
      status = 'unknown';
    }
  } else {
    status = 'unknown';
  }
} catch {
  status = 'unknown';
}

const socialLinks = [
  {
    name: 'X',
    url: 'https://x.com/dg4_design',
    icon: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>`,
  },
  {
    name: 'Instagram',
    url: 'https://instagram.com/dg4_design',
    icon: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>`,
  },
  {
    name: 'Note',
    url: 'https://note.com/dg4_design',
    icon: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M16.018 2C18.22 2 20 3.78 20 5.982v12.036C20 20.22 18.22 22 16.018 22H7.982C5.78 22 4 20.22 4 18.018V5.982C4 3.78 5.78 2 7.982 2h8.036zM8.5 7a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h7a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-7zm0 4a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h7a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-7zm0 4a.5.5 0 00-.5.5v1a.5.5 0 00.5.5h4a.5.5 0 00.5-.5v-1a.5.5 0 00-.5-.5h-4z"/></svg>`,
  },
  {
    name: 'YouTube',
    url: 'https://www.youtube.com/@dg4_design',
    icon: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>`,
  },
  {
    name: 'Suzuri',
    url: 'https://suzuri.jp/dg4_design',
    icon: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M18 6h-2V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-6 11a4 4 0 110-8 4 4 0 010 8zm2-11h-4V4h4v2z"/></svg>`,
  },
  {
    name: 'Zenn',
    url: 'https://zenn.dev/dg4_design',
    icon: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M.264 23.771h4.984a.8.8 0 00.645-.352L19.614.874c.176-.293-.029-.645-.381-.645h-4.72a.63.63 0 00-.557.322L.03 23.125c-.176.294.029.646.234.646zM17.445 23.419l6.479-10.408a.477.477 0 00-.41-.733h-4.691a.545.545 0 00-.468.264l-6.536 10.525a.477.477 0 00.41.733h4.749a.606.606 0 00.467-.381z"/></svg>`,
  },
  {
    name: 'GitHub',
    url: 'https://github.com/dg4-design',
    icon: `<svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>`,
  },
];
---

<BaseLayout
  title="Contact - dgdgdgdg"
  description="dgdgdgdgへのお問い合わせは、Messenger・メールまたは各SNSからお気軽にどうぞ。お仕事のご依頼・ご相談を受け付けています。リアルタイムで現在の受付状況も掲載。"
  keywords="contact, SNS, dgdgdgdg"
>
  <Fragment slot="head"> </Fragment>
  <Header status={status} />
  <main>
    <section class="contact-hero">
      <p class="contact-description">
        お仕事のご依頼・ご相談は、Messenger・メール<br />または各SNSからお気軽にどうぞ。
      </p>
    </section>

    <section class="primary-contacts">
      <a href="https://m.me/dg4.design" target="_blank" rel="noopener noreferrer" class="social-link-card">
        <span class="social-icon">
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"
            ><path
              d="M12 0C5.373 0 0 4.975 0 11.111c0 3.497 1.745 6.616 4.472 8.652V24l4.086-2.242c1.09.301 2.246.464 3.442.464 6.627 0 12-4.974 12-11.111C24 4.975 18.627 0 12 0zm1.193 14.963l-3.056-3.259-5.963 3.259L10.733 8.2l3.13 3.259L19.776 8.2l-6.583 6.763z"
            ></path></svg
          >
        </span>
        <span class="social-name">Messenger</span>
        <span class="social-arrow">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="7" y1="17" x2="17" y2="7"></line>
            <polyline points="7 7 17 7 17 17"></polyline>
          </svg>
        </span>
      </a>
      <a href="mailto:contact@dgdgdgdg.com" class="social-link-card">
        <span class="social-icon">
          <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"
            ><path
              d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"
            ></path></svg
          >
        </span>
        <span class="social-name">Email</span>
        <span class="social-arrow">
          <svg
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="7" y1="17" x2="17" y2="7"></line>
            <polyline points="7 7 17 7 17 17"></polyline>
          </svg>
        </span>
      </a>
    </section>

    <section class="social-links">
      {
        socialLinks.map((link) => (
          <a href={link.url} target="_blank" rel="noopener noreferrer" class="social-link-card">
            <span class="social-icon" set:html={link.icon} />
            <span class="social-name">{link.name}</span>
            <span class="social-arrow">
              <svg
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line x1="7" y1="17" x2="17" y2="7" />
                <polyline points="7 7 17 7 17 17" />
              </svg>
            </span>
          </a>
        ))
      }
    </section>
  </main>
  <Footer />
</BaseLayout>

<style lang="sass">
  main
    background-color: var(--c-black)
    min-height: 100vh
    padding: 160px 80px 120px
    display: flex
    flex-direction: column
    align-items: center

  .contact-hero
    text-align: center
    margin-bottom: 80px
    max-width: 600px

  .contact-title
    color: var(--c-white)
    font-size: 48px
    font-weight: 900
    letter-spacing: 0.08em
    margin-bottom: 24px

  .contact-description
    color: var(--c-white)
    font-size: 16px
    line-height: 2
    letter-spacing: 0.04em
    margin-bottom: 20px

  .primary-contacts
    display: grid
    grid-template-columns: repeat(2, 1fr)
    gap: 16px
    width: 100%
    max-width: 640px
    margin-bottom: 16px

  .social-links
    display: grid
    grid-template-columns: repeat(2, 1fr)
    gap: 16px
    width: 100%
    max-width: 640px

  .social-link-card
    display: flex
    align-items: center
    gap: 16px
    padding: 20px 24px
    background: var(--c-white-a3)
    border: 1px solid var(--c-white-a8)
    border-radius: 12px
    text-decoration: none
    color: var(--c-white-a70)
    transition: all 0.3s ease
    &:hover
      background: var(--c-white-a6)
      border-color: var(--c-accent-a30)
      color: var(--c-white)
      .social-icon
        color: var(--c-accent)
      .social-arrow
        opacity: 1
        transform: translate(2px, -2px)

  .social-icon
    width: 20px
    height: 20px
    flex-shrink: 0
    color: var(--c-white-a50)
    transition: color 0.3s ease
    :global(svg)
      width: 100%
      height: 100%
      display: block

  .social-name
    font-family: 'Zen Kaku Gothic New', sans-serif
    font-size: 15px
    font-weight: 500
    letter-spacing: 0.06em
    flex: 1

  .social-arrow
    width: 16px
    height: 16px
    flex-shrink: 0
    opacity: 0
    transition: all 0.3s ease
    svg
      width: 100%
      height: 100%
      display: block

  @media (max-width: 768px)
    main
      padding: 120px 24px 80px

    .contact-hero
      margin-bottom: 56px

    .contact-title
      font-size: 36px

    .contact-description
      font-size: 15px

    .primary-contacts
      grid-template-columns: 1fr
      max-width: 400px

    .social-links
      grid-template-columns: 1fr
      max-width: 400px

    .social-link-card
      padding: 18px 20px

    .social-arrow
      opacity: 0.4
</style>
